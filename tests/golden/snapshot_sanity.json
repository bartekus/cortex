{
    "interactions": [
        {
            "request": {
                "jsonrpc": "2.0",
                "method": "initialize",
                "id": 1,
                "params": {
                    "protocolVersion": "2024-11-05",
                    "capabilities": {},
                    "clientInfo": {
                        "name": "test-client",
                        "version": "1.0.0"
                    }
                }
            },
            "response": {
                "jsonrpc": "2.0",
                "result": {
                    "capabilities": {
                        "tools": {
                            "listChanged": true
                        }
                    },
                    "protocolVersion": "2024-11-05",
                    "serverInfo": {
                        "name": "cortex-mcp",
                        "version": "0.1.0"
                    }
                },
                "error": null,
                "id": 1
            }
        },
        {
            "request": {
                "jsonrpc": "2.0",
                "method": "tools/call",
                "id": 2,
                "params": {
                    "name": "snapshot.info",
                    "arguments": {
                        "repo_root": "__REPO_ROOT__"
                    }
                }
            },
            "response": {
                "jsonrpc": "2.0",
                "result": {
                    "content": [
                        {
                            "json": {
                                "cache_hint": "until_dirty",
                                "fingerprint": {
                                    "head_oid": "96b5c0893afecee8b85ece82b1a82ce15fe5ec1b",
                                    "index_oid": "f065f5b45ebfb7c38dc0d4b2feb8875d004c6dfb",
                                    "status_hash": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
                                },
                                "manifest_stats": {
                                    "bytes": 0,
                                    "files": 0
                                }
                            },
                            "type": "json"
                        }
                    ]
                },
                "error": null,
                "id": 2
            }
        },
        {
            "request": {
                "jsonrpc": "2.0",
                "method": "tools/call",
                "id": 3,
                "params": {
                    "name": "snapshot.list",
                    "arguments": {
                        "repo_root": "__REPO_ROOT__",
                        "path": ".",
                        "mode": "worktree"
                    }
                }
            },
            "response": {
                "jsonrpc": "2.0",
                "result": {
                    "content": [
                        {
                            "json": {
                                "cache_hint": "until_dirty",
                                "cache_key": "<UUID>:sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
                                "entries": [
                                    {
                                        "path": "./README.md",
                                        "type": "file"
                                    },
                                    {
                                        "path": "./src",
                                        "type": "dir"
                                    }
                                ],
                                "fingerprint": {
                                    "head_oid": "96b5c0893afecee8b85ece82b1a82ce15fe5ec1b",
                                    "index_oid": "f065f5b45ebfb7c38dc0d4b2feb8875d004c6dfb",
                                    "status_hash": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
                                },
                                "lease_id": "<UUID>",
                                "mode": "worktree",
                                "path": ".",
                                "snapshot_id": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
                                "total": 2,
                                "truncated": false
                            },
                            "type": "json"
                        }
                    ]
                },
                "error": null,
                "id": 3
            }
        },
        {
            "request": {
                "jsonrpc": "2.0",
                "method": "tools/call",
                "id": 4,
                "params": {
                    "name": "snapshot.create",
                    "arguments": {
                        "repo_root": "__REPO_ROOT__"
                    }
                }
            },
            "response": {
                "jsonrpc": "2.0",
                "result": {
                    "content": [
                        {
                            "json": {
                                "cache_hint": "immutable",
                                "cache_key": "sha256:ab8e276bbdf315853db202f46bbea6427a77d47dbf08c407b2acff41a238b421",
                                "head_sha": "96b5c0893afecee8b85ece82b1a82ce15fe5ec1b",
                                "repo_root": "__REPO_ROOT__",
                                "snapshot_id": "sha256:ab8e276bbdf315853db202f46bbea6427a77d47dbf08c407b2acff41a238b421"
                            },
                            "type": "json"
                        }
                    ]
                },
                "error": null,
                "id": 4
            }
        }
    ]
}